"use strict";angular.module("lelyvitoApp",["ngAnimate","ui.router","firebase","angularMoment","angular-loading-bar","ui.bootstrap","angulartics","angulartics.google.analytics"]).constant("$",window.$).constant("MAX_IMG",13).constant("LLV_TITLE"," | Lely & Vito Wedding").config(["$stateProvider","$urlRouterProvider","LLV_TITLE",function(a,b,c){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/home.html",controller:"HomeCtrl",data:{pageTitle:"Lely & Vito Wedding"}}).state("invitation",{url:"/invitation",templateUrl:"views/invitation.html",data:{pageTitle:"Invitation"+c}}).state("location",{url:"/location",templateUrl:"views/location.html",data:{pageTitle:"Location"+c}}).state("transport",{url:"/transport",templateUrl:"views/transport.html",controller:"TransportCtrl",data:{pageTitle:"Transportation"+c}}).state("guestbook",{url:"/guestbook",templateUrl:"views/guestbook.html",controller:"GuestbookCtrl",data:{pageTitle:"Guestbook"+c}}).state("about",{url:"/about",templateUrl:"views/about.html",controller:"AboutCtrl",data:{pageTitle:"About"+c}}).state("aboutVito",{url:"/about/vito",templateUrl:"views/about-vito.html",data:{pageTitle:"About Vito"+c}}).state("aboutLely",{url:"/about/lely",templateUrl:"views/about-lely.html",data:{pageTitle:"About Lely"+c}}).state("album",{url:"/album",templateUrl:"views/album.html",controller:"AlbumCtrl",data:{pageTitle:"Album"+c}}).state("albumDetail",{url:"/album/{imgId}",templateUrl:"views/album-detail.html",controller:"AlbumDetailCtrl",data:{pageTitle:"Album"+c}})}]).run(["$rootScope","$state",function(a){a.$on("$stateChangeStart",function(b,c){a.state=c})}]),angular.module("lelyvitoApp").controller("HomeCtrl",["$scope","$state",function(a,b){a.goToInvitation=function(){b.go("invitation")}}]),angular.module("lelyvitoApp").controller("AboutCtrl",["$scope",function(a){a.vito="Vito Ardhiyanto",a.lely="Lely Mufika"}]),angular.module("lelyvitoApp").controller("GuestbookCtrl",["$scope","$firebase",function(a,b){var c=new Firebase("https://lely-vito.firebaseio.com/guestbook");a.messages=b(c).$asArray(),a.isMsgLoading=!0,a.isLoggedIn=!1,a.user=null,a.messages.$loaded().then(function(){a.isMsgLoading=!1}),a.addMessage=function(){if(a.msg){{a.name||"anonymous"}a.messages.$add({from:a.user.displayName,body:a.msg,user:a.user,timestamp:Firebase.ServerValue.TIMESTAMP}),a.name="",a.msg=""}};var d=new Firebase("https://lely-vito.firebaseio.com/rsvp");a.allRSVP=b(d).$asArray(),a.isRSVPLoading=!0,a.currentUserRSVP=2;var e=function(){for(var b=0,c=a.allRSVP.length;c>b;++b)if(a.user.id===a.allRSVP[b].user.id)return void(a.currentUserRSVP=a.allRSVP[b].rsvp)},f=function(b,c){for(var d=0,e=a.allRSVP.length;e>d;++d)if(a.user.id===a.allRSVP[d].user.id)return a.allRSVP[d].rsvp=c,void a.allRSVP.$save(d)},g=function(){if(a.allRSVP&&a.user)for(var b=0,c=a.allRSVP.length;c>b;++b)if(a.user.id===a.allRSVP[b].user.id)return a.allRSVP[b];return!1};a.allRSVP.$loaded().then(function(){a.isRSVPLoading=!1,a.user&&e()}),a.updateRSVP=function(){a.allRSVP&&e()},a.$watch("currentUserRSVP",function(b){angular.isDefined(b)&&2!==b&&(console.log("currentUserRSVP changed",b),g()?f(a.user.id,b):a.allRSVP.$add({rsvp:b,user:a.user,timestamp:Firebase.ServerValue.TIMESTAMP}))}),a.rsvpMatcher=function(a){return function(b){return b.rsvp===a}},a.countRSVP=function(b){var c=0;return angular.forEach(a.allRSVP,function(a){a.rsvp===b&&++c}),c};var h=new Firebase("https://lely-vito.firebaseio.com"),i=new FirebaseSimpleLogin(h,function(b,c){b?(console.log("errorr",b),a.isLoggedIn=!1):c?a.$apply(function(){a.isLoggedIn=!0,a.user=c,a.updateRSVP()}):(console.log("user is logged out"),a.isLoggedIn=!1)});a.loginFB=function(){i.login("facebook")},a.loginTW=function(){i.login("twitter")},a.isGreetings=!1}]),angular.module("lelyvitoApp").controller("TransportCtrl",["$scope",function(a){var b=[{name:"Jakarta - Surabaya",link:"http://www.traveloka.com/fullsearch?ap=JKTA.SUB&dt=10-10-2014.NA&ps=1.0.0"},{name:"Jakarta - Malang",link:"http://www.traveloka.com/fullsearch?ap=JKTA.MLG&dt=10-10-2014.NA&ps=1.0.0"},{name:"Bandung - Surabaya",link:"http://www.traveloka.com/fullsearch?ap=BDO.SUB&dt=10-10-2014.NA&ps=1.0.0"},{name:"Bandung - Malang",link:"http://www.traveloka.com/fullsearch?ap=BDO.MLG&dt=10-10-2014.NA&ps=1.0.0"},{name:"Jogja - Surabaya",link:"http://www.traveloka.com/fullsearch?ap=JOG.SUB&dt=10-10-2014.NA&ps=1.0.0"},{name:"Jojga - Malang",link:"http://www.traveloka.com/fullsearch?ap=JOG.MLG&dt=10-10-2014.NA&ps=1.0.0"},{name:"Semarang - Surabaya",link:"http://www.traveloka.com/fullsearch?ap=SRG.SUB&dt=10-10-2014.NA&ps=1.0.0"},{name:"Semarang - Malang",link:"http://www.traveloka.com/fullsearch?ap=SRG.MLG&dt=10-10-2014.NA&ps=1.0.0"},{name:"Makassar - Surabaya",link:"http://www.traveloka.com/fullsearch?ap=UPG.SUB&dt=10-10-2014.NA&ps=1.0.0"},{name:"Makassar - Malang",link:"http://www.traveloka.com/fullsearch?ap=UPG.MLG&dt=10-10-2014.NA&ps=1.0.0"}],c=[{name:"Grand Surya Hotel Kediri",link:"http://www.suryahotelsgroup.com/beta/surya/"},{name:"Insumo Palace Hotel Kediri",link:"http://insumopalace.com/"},{name:"Hotel Merdeka Kediri",link:"http://www.suryahotelsgroup.com/beta/merdeka/"},{name:"Lotus Garden Kediri",link:"http://lotusgardenhotel.com/"},{name:"Hotel Bismo Kediri",link:"http://www.hotelbismo.com/"},{name:"Bukit Daun Hotel & Resort Kediri",link:"http://www.bukit-daun.com/"},{name:"Hotel Penataran Kediri",link:"http://www.phrikediriraya.com/page/show/146/hotel-penataran"}],d=[{name:"Jakarta (Gambir) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=GMR&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0&do=Cari"},{name:"Jakarta (Pasar Senen) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=PSE&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0"},{name:"Jakarta (Tanah Abang) – Kediri"},{name:"Bandung - Kediri",link:"http://www.tiket.com/kereta-api/cari?d=BD&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0&class=all&maxseats=1"},{name:"Bandung (Kiaracondong) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=KAC&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0"},{name:"Tegal – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=TG&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0&class=all&maxseats=1"},{name:"Yogyakarta (Tugu) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=YK&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0"},{name:"Semarang (Tawang) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=SMT&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0"},{name:"Solo (Balapan) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=SLO&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0"},{name:"Madiun – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=MN&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0"},{name:"Malang (Kota) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=ML&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0&class=all&maxseats=1"},{name:"Surabaya (Gubeng) – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=SGU&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0&class=all&maxseats=1"},{name:"Jember – Kediri",link:"http://www.tiket.com/kereta-api/cari?d=JR&a=KD&date=2014-10-10&ret_date=&adult=1&child=0&infant=0&class=all&maxseats=1"}];a.model=[{title:"Plane",content:b,active:!0},{title:"Train",content:d},{title:"Hotel",content:c}]}]),angular.module("lelyvitoApp").directive("llvAlbumDir",["$","$state","$timeout",function(a,b){return{restrict:"A",scope:{imgId:"="},link:function(c){var d=+c.imgId-1,e=+c.imgId+1;a(document).keyup(function(a){var c=a.keyCode;37===c&&b.go("albumDetail",{imgId:d}),39===c&&b.go("albumDetail",{imgId:e})}),c.$on("$destroy",function(){a(document).unbind("keyup")})}}}]),angular.module("lelyvitoApp").directive("llvBootstrapMenu",["$",function(a){return{templateUrl:"scripts/directives/llv-bootstrap-menu.html",restrict:"E",link:function(){a(".nav a").on("click",function(){var b=a(window).width();768>=b&&a(".navbar-toggle").click()})}}}]),angular.module("lelyvitoApp").directive("llvStaticmenu",["$",function(){return{templateUrl:"scripts/directives/llv-staticmenu.html",restrict:"E",link:function(){}}}]),angular.module("lelyvitoApp").directive("llvLazy",["$","$timeout",function(a,b){return{restrict:"EA",link:function(c,d){b(function(){a(d).lazyload()})}}}]),angular.module("lelyvitoApp").directive("llvFbComment",["$","$timeout",function(){function a(a,b,c,d,e){return'<div class="fb-comments" data-href="'+a+'" data-numposts="'+d+'" data-width="'+b+'" data-order-by="'+c+'" data-colorsheme="'+e+'"></div>'}return{restrict:"A",link:function(b,c,d){d.$observe("href",function(b){var e=b,f=d.width,g=d.numposts||5,h=d.orderBy||"time",i=d.colorscheme||"light";c.html(a(e,f,h,g,i)),FB.XFBML.parse(c[0])})}}}]),angular.module("lelyvitoApp").directive("llvThemeChanger",["$",function(){return{templateUrl:"scripts/directives/llv-theme-changer.html",restrict:"E",controller:"llvThemeChangerCtrl",link:function(){}}}]).controller("llvThemeChangerCtrl",["$scope",function(a){a.isActive=!1,a.bgColor="photo",a.toggleThemeChanger=function(){a.isActive=!a.isActive}}]),angular.module("lelyvitoApp").directive("llvPathMenu",["$",function(){return{templateUrl:"scripts/directives/llv-path-menu.html",restrict:"E",link:function(){}}}]),angular.module("lelyvitoApp").controller("AlbumCtrl",["$scope","$timeout","MAX_IMG",function(a,b,c){a.thumbs=[];for(var d=1;c>=d;++d)a.thumbs.push(d)}]),angular.module("lelyvitoApp").controller("AlbumDetailCtrl",["$scope","$timeout","$state","$stateParams","$log","MAX_IMG",function(a,b,c,d,e,f){var g=d.imgId;1>g&&c.go("albumDetail",{imgId:f}),g>f&&c.go("albumDetail",{imgId:1}),a.model={currAlbumId:g,prevId:+g-1,nextId:+g+1,imgName:"images/album/original_"+g+".jpg"}}]);